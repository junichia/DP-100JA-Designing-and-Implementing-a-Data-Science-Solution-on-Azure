---
lab:
    title: 'Azure Machine Learning ワークスペースを作成する'
---

# Azure Machine Learning ワークスペースを作成して探索する

この演習では、Azure Machine Learning ワークスペースを作成して説明します。

## Azure Machine Learning ワークスペースを作成する

名前が示すように、ワークスペースは、機械学習プロジェクトで作業するために必要なすべての Azure ML 資産を管理するための一元的な場所です。

1. [Azure portal](https://portal.azure.com) で、次の設定を指定して新しい **Machine Learning** リソースを作成します。

    - **サブスクリプション**: *お使いの Azure サブスクリプション*
    - **リソース グループ**: *リソース グループを作成または選択します*
    - **「ワークスペース名」**： *ワークスペースの一意の名前を入力します*
    - **リージョン**: *最も近い地理的リージョンを選択します*
    - **ストレージ アカウント**: *ワークスペース用に作成されるデフォルトの新規ストレージ アカウントに注意してください。*
    - **キー コンテナー**: *ワークスペース用に作成されるデフォルトの新規キー コンテナーに注意してください。*
    - **Application Insights**: *ワークスペース用に作成されるデフォルトの新規 Application Insights に注意してください。*
    - **コンテナー レジストリ**: なし (*モデルを初めてコンテナにデプロイするときに自動的に作成されます*)

    > **注**: Azure Machine Learning ワークスペースを作成する場合、いくつかの高度なオプションを使用して、*プライベート エンドポイント*経由のアクセスを制限し、データ暗号化用のカスタム キーを指定できます。この演習ではこれらのオプションは使用しませんが、注意してください。

2. ワークスペースと関連リソースが作成されたら、ポータルでワークスペースを表示します。

## Azure Machine Learning Studio を探索する

Azure portal では、一部のワークスペース資産を管理できます。しかし、データ サイエンティストにとって、このツールには、Azure の一般的なリソースの管理に関連する多くの無関係な情報とリンクが含まれています。*Azure Machine Learning Studio* は、ワークスペースで作業するための専用の Web ポータルを提供します。

1. Azure Machine Learning ワークスペース用の Azure portal ブレードで、リンクをクリックして、Studio を起動します。または、新しいブラウザーのタブで、[https://ml.azure.com](https://ml.azure.com) を開きます。メッセージが表示されたら、前のタスクで使用した Microsoft アカウントを使用してサインインし、Azure サブスクリプションとワークスペースを選択します。

    > **ヒント** 複数の Azure サブスクリプションがある場合は、サブスクリプションが定義されている Azure *ディレクトリ* を選択する必要があります。次にサブスクリプションを選択し、最後にワークスペースを選択します。

2. ワークスペースの Azure Machine Learning Studio インターフェイスを表示する - ワークスペース内のすべての資産をここから管理できます。
3. Azure Machine Learning Studio で、左上にある &#9776; アイコンを切り替えると、インターフェイス内のさまざまなページを表示したり非表示にしたりできます。これらのページを使用して、ワークスペース内のリソースを管理できます。

## コンピューティング インスタンスを作成する

Azure Machine Learning の利点の 1 つは、大規模に実験とトレーニング スクリプトを実行できるクラウドベースのコンピューティングを作成できることです。

1. Azure Machine Learning Studio で、**コンピューティング** ページを表示します。ここで、データ サイエンス アクティビティのコンピューティング リソースを管理します。作成できるコンピューティング リソースは 4 種類あります。
    - **コンピューティング インスタンス**: データ サイエンティストがデータおよびモデルを操作するために使用できる開発ワークステーション。
    - **コンピューティング クラスター**: 実験コードをオンデマンドで処理するための、仮想マシンのスケーラブルなクラスター。
    - **推論クラスター**: トレーニング済みモデルを使用する予測サービスのデプロイ先。
    - **接続型コンピューティング**: Virtual Machines や Azure Databricks クラスターなど、その他の Azure コンピューティング リソースへのリンク。

    この演習では、ワークスペースでコードを実行できるようにコンピューティング インスタンスを作成します。

2. **コンピューティング インスタンス** タブで、次の設定を使用して新しいコンピューティング インスタンスを追加します。これをワークステーションとして使用し、ノートブックでコードを実行します。
    - **リージョン**: *ワークスペースと同じリージョン*
    - **仮想マシンのタイプ**: CPU
    - **仮想マシンのサイズ**: Standard_DS11_v2
    - **コンピューター名**: *一意の名前を入力する*
    - **SSH アクセスの有効化**: 未選択 (これを使用して、SSH クライアントを使用した仮想マシンへの直接アクセスを有効にすることができます)
    - **詳細設定の表示**: 次の設定に注意しますが、選択しないでください。
        - **仮想ネットワークの有効化**: 未選択 (通常、これをエンタープライズ環境で使用してネットワーク・セキュリティを強化します)
        - **他のユーザーへ割り当て**: 未選択 (これを使用して、コンピューティング インスタンスをデータ サイエンティストに割り当てることができます)
3. コンピューティング インスタンスが起動し、状態が **実行中** に変わるまで待ちます。

## ノートブックを複製して実行する

多くのデータ サイエンスや機械学習の実験は、*ノートブック* でコードを実行することによって行われます。コンピューティング インスタンスには、大規模な作業に使用できる完全な機能を備えた Python ノートブック環境 (*Jupyter* と *JuypyterLab*) が含まれています。しかし、基本的なノートブックの編集には、Azure Machine Learning Studio に組み込まれている **ノートブック** ページを使用することができます。

1. Azure Machine Learning Studio で、**ノートブック** ページを表示します。
2. **ターミナル** を開き、その **コンピューティング** がコンピューティング インスタンスに設定されていることを確認します。
3. 次のコマンドを入力して、ノートブック、データ、およびその他のファイルを含む Git リポジトリをワークスペースに複製します。

    ```bash
    cd Users
    git clone https://github.com/MicrosoftLearning/mslearn-dp100
    ```

4. コマンドが完了したら、**マイ ファイル** ウィンドウで **&#8635;** をクリックしてビューを更新し、新しい **Users/mslearn-dp100** フォルダーが作成されていることを確認します。このフォルダーには、複数の **ipynb** ノートブック ファイルが含まれています。
5. ターミナル ウィンドウを閉じ、セッションを終了します。
6. **Users/mslearn-dp100** フォルダーにある **Get Started with Notebooks** (ノートブックを開始する) を開きます。次に、注意事項を読み、記載されている指示に従います。

> **ヒント**: コード セルを実行するには、実行するセルを選択し、**&#9655;** ボタンを使用して実行します。

## コンピューティング インスタンスを停止する

今のところ Azure Machine Learning の探索が終わっているのであれば、Azure サブスクリプションに不要な料金が発生しないように、コンピューティング インスタンスをシャット ダウンする必要があります。

1. Azure Machine Learning Studio の**コンピューティング** ページで、コンピューティング インスタンスを選択します。
2. **停止** をクリックしてコンピューティング インスタンスを停止します。シャット ダウンされると、その状態は **停止済み** に変わります。
